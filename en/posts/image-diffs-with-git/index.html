<!doctype html>
<html class='no-js' lang=en>
    <head>
        <title>Isomorphic Example</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <script src="/assets/loader-26764a82cdd944e48447.js"></script>
<link rel="stylesheet" href="/assets/page-26764a82cdd944e48447.css"/>
<script src="/assets/head-26764a82cdd944e48447.js"></script>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_"><a href="/ru/" class="style__link___1ZFL2">ru</a></li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">Visual diffs for the images in a git repo</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus" data-yashareL10n="en" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Published on 3/18/2016</span><div><p>My first task for new projects is to create a git repository. Whether it is a new app, or conference slides, or even an
article, I prefer to keep everything in Git. It is an excellent tool, and, personally, I enjoy its command line
interface.</p>
<p>However, there is always room for improvement. Recently I found an idea how to make my git visualize the changes that
I've done to the images in a repository.</p>
<excerpt/>
<pre><code class="language-sh">Varyas-MBP £ ~/path/to/project ⤳ master*
  › git status
On branch master
Changes not staged for commit:
  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)
  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)

    modified:   desktop.blocks/social-ico/social-ico__rss.png
    modified:   desktop.blocks/social-ico/social-ico__twitter.png

no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)
Varyas-MBP £ ~/path/to/project ⤳ master*
</code></pre>
<p>I can run <code>git diff</code> over each of the modified images to see the following:</p>
<p><img src="/posts/image-diffs-with-git/diff1.png" alt=""></p>
<p><img src="/posts/image-diffs-with-git/diff2.png" alt=""></p>
<p>For every picture displayed, I can see a previous version (on the left side), a current version (on the right side) and
visually represented difference (in between). This feature is useful for tracking exact changes in the image. Now, I can
easily spot if some particular details were shifted, some colors were changed, or a picture was accidentally blended
with another one.</p>
<p>You can configure git to do the same. First, install ImageMagick to provide a visual comparison. Note that for the
latest versions of OS X you need to install a package with a support of X11. To install with <code>brew</code>, do the following:</p>
<pre><code>  › brew install imagemagick --with-x11
</code></pre>
<p>Then, create a script to compare two given images. Run <code>cat ~/bin/git-imgdiff</code>, and paste inside:</p>
<pre><code>#!/bin/sh
compare $2 $1 png:- | montage -geometry +4+4 $2 - $1 png:- | display -title &quot;$1&quot; -
</code></pre>
<p>Now, test the script. It should do the comparison of two processed images:</p>
<pre><code>  › ~/bin/git-imgdiff img1.png img2.png
</code></pre>
<p>At this step, you need to show git how to use compariing script. For that, define the image files their extensions
in a special file. Run <code>cat ~/.gitattributes</code> and paste the following:</p>
<pre><code>*.gif diff=image
*.jpg diff=image
*.png diff=image
</code></pre>
<p>Provide git with this configuration by:</p>
<pre><code>  › git config --global core.attributesfile '~/.gitattributes'
</code></pre>
<p>The last step is to instruct git to use your script when <code>diff</code> command is applied to the matching files:</p>
<pre><code>  › git config --global diff.image.command '~/bin/git-imgdiff'
</code></pre>
<p>That's it. Now, running a <code>git diff</code> over your images you will get a human-friendly output. Enjoy!</p>
<h3>References</h3>
<ul>
<li>[1] http://www.akikoskinen.info/image-diffs-with-git/</li>
<li>[2] http://paulmestemaker.com/imagemagick-display-mac-os-x/</li>
</ul>
</div></div></div><div class="style__comments___3emEu"><div><div id="disqus_thread"></div><script>
    (function(){
        window.disqus_shortname = 'varya';
        window.disqus_developer = '1';
        window.disqus_url = 'http://varya.me//en/posts/image-diffs-with-git';
        window.disqus_identifier = 'posts-image-diffs-with-git-index-en';
        window.disqus_title = 'Visual diffs for the images in a git repo';
        if ( window.DISQUS ) {
            return DISQUS.reset({
                reload: true,
                config: function () {
                    this.page.identifier = window.disqus_identifier;
                    this.page.url = window.disqus_url;
                    this.page.title = window.disqus_title;
                }
            });
        }
        else {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }
    })();
</script></div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">On this site</h3><li class="style__item___2LuN-"><a href="/en/posts/" class="style__link___1ZFL2">Tech Blog</a></li><li class="style__item___2LuN-"><a href="/en/content/" class="style__link___1ZFL2">Articles and talks</a></li><li class="style__item___2LuN-"><a href="/" class="style__link___1ZFL2">About me</a></li><li class="style__item___2LuN-"><a href="/en/life/" class="style__link___1ZFL2">My life</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <script src="/assets/page-26764a82cdd944e48447.js"></script>
<script src="/assets/index-26764a82cdd944e48447.js"></script>
<script src="http://localhost:35729/livereload.js"></script>
    </body>
</html>

